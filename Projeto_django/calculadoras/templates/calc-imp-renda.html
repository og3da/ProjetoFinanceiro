{% extends 'master.html' %}

{% block title %}
  IMPOSTO DE RENDA
{% endblock %}

{% block content %}
  <body>
    <div class="container-fluid">
      <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar"></button>
            <a class="navbar-brand" href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M0 32l34.9 395.8L191.5 480l157.6-52.2L384 32H0zm308.2 127.9H124.4l4.1 49.4h175.6l-13.6 148.4-97.9 27v.3h-1.1l-98.7-27.3-6-75.8h47.7L138 320l53.5 14.5 53.7-14.5 6-62.2H84.3L71.5 112.2h241.1l-4.4 47.7z"/></svg>  EDUCAÇÃO FINANCEIRA </a>
          </div>
          <div class="collapse navbar-collapse" id="myNavbar">
            <ul class="nav navbar-nav navbar-left">
              <li><a href="#home"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M575.8 255.5C575.8 273.5 560.8 287.6 543.8 287.6H511.8L512.5 447.7C512.6 483.2 483.9 512 448.5 512H128.1C92.75 512 64.09 483.3 64.09 448V287.6H32.05C14.02 287.6 0 273.5 0 255.5C0 246.5 3.004 238.5 10.01 231.5L266.4 8.016C273.4 1.002 281.4 0 288.4 0C295.4 0 303.4 2.004 309.5 7.014L564.8 231.5C572.8 238.5 576.9 246.5 575.8 255.5H575.8zM288 160C252.7 160 224 188.7 224 224C224 259.3 252.7 288 288 288C323.3 288 352 259.3 352 224C352 188.7 323.3 160 288 160zM256 320C211.8 320 176 355.8 176 400C176 408.8 183.2 416 192 416H384C392.8 416 400 408.8 400 400C400 355.8 364.2 320 320 320H256z"/></svg>   </a></li>
              <li><a href="#services"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M256 48C256 21.49 277.5 0 304 0H592C618.5 0 640 21.49 640 48V464C640 490.5 618.5 512 592 512H381.3C383 506.1 384 501.6 384 496V253.3C402.6 246.7 416 228.9 416 208V176C416 149.5 394.5 128 368 128H256V48zM571.3 347.3C577.6 341.1 577.6 330.9 571.3 324.7L507.3 260.7C501.1 254.4 490.9 254.4 484.7 260.7L420.7 324.7C414.4 330.9 414.4 341.1 420.7 347.3C426.9 353.6 437.1 353.6 443.3 347.3L480 310.6V432C480 440.8 487.2 448 496 448C504.8 448 512 440.8 512 432V310.6L548.7 347.3C554.9 353.6 565.1 353.6 571.3 347.3H571.3zM0 176C0 167.2 7.164 160 16 160H368C376.8 160 384 167.2 384 176V208C384 216.8 376.8 224 368 224H16C7.164 224 0 216.8 0 208V176zM352 480C352 497.7 337.7 512 320 512H64C46.33 512 32 497.7 32 480V256H352V480zM144 320C135.2 320 128 327.2 128 336C128 344.8 135.2 352 144 352H240C248.8 352 256 344.8 256 336C256 327.2 248.8 320 240 320H144z"/></svg> </a></li>
              <li><a href="#about"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 400c-18 0-32-14-32-32s13.1-32 32-32c17.1 0 32 14 32 32S273.1 400 256 400zM325.1 258L280 286V288c0 13-11 24-24 24S232 301 232 288V272c0-8 4-16 12-21l57-34C308 213 312 206 312 198C312 186 301.1 176 289.1 176h-51.1C225.1 176 216 186 216 198c0 13-11 24-24 24s-24-11-24-24C168 159 199 128 237.1 128h51.1C329 128 360 159 360 198C360 222 347 245 325.1 258z"/></svg>   </a></li>
              <li><a href="#contact"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M511.2 387l-23.25 100.8c-3.266 14.25-15.79 24.22-30.46 24.22C205.2 512 0 306.8 0 54.5c0-14.66 9.969-27.2 24.22-30.45l100.8-23.25C139.7-2.602 154.7 5.018 160.8 18.92l46.52 108.5c5.438 12.78 1.77 27.67-8.98 36.45L144.5 207.1c33.98 69.22 90.26 125.5 159.5 159.5l44.08-53.8c8.688-10.78 23.69-14.51 36.47-8.975l108.5 46.51C506.1 357.2 514.6 372.4 511.2 387z"/></svg>   </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li class="dropdown"> <!--PLANEJAMENTO FINANCEIRO -->
                <a href="#" class="dropbtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M575.8 255.5C575.8 273.5 560.8 287.6 543.8 287.6H511.8L512.5 447.7C512.6 483.2 483.9 512 448.5 512H128.1C92.75 512 64.09 483.3 64.09 448V287.6H32.05C14.02 287.6 0 273.5 0 255.5C0 246.5 3.004 238.5 10.01 231.5L266.4 8.016C273.4 1.002 281.4 0 288.4 0C295.4 0 303.4 2.004 309.5 7.014L564.8 231.5C572.8 238.5 576.9 246.5 575.8 255.5H575.8zM288 160C252.7 160 224 188.7 224 224C224 259.3 252.7 288 288 288C323.3 288 352 259.3 352 224C352 188.7 323.3 160 288 160zM256 320C211.8 320 176 355.8 176 400C176 408.8 183.2 416 192 416H384C392.8 416 400 408.8 400 400C400 355.8 364.2 320 320 320H256z"/></svg>  PLANEJAMENTO FINANCEIRO </a>
                <div class="dropdown-content">
                  <a href="#">Aprenda a economizar</a>
                  <a href="#">Como renegociar dívidas</a>
                </div>
              </li>
              <li class="dropdown"> <!--INVESTIMENTOS -->
                <a href="#" class="dropbtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M256 48C256 21.49 277.5 0 304 0H592C618.5 0 640 21.49 640 48V464C640 490.5 618.5 512 592 512H381.3C383 506.1 384 501.6 384 496V253.3C402.6 246.7 416 228.9 416 208V176C416 149.5 394.5 128 368 128H256V48zM571.3 347.3C577.6 341.1 577.6 330.9 571.3 324.7L507.3 260.7C501.1 254.4 490.9 254.4 484.7 260.7L420.7 324.7C414.4 330.9 414.4 341.1 420.7 347.3C426.9 353.6 437.1 353.6 443.3 347.3L480 310.6V432C480 440.8 487.2 448 496 448C504.8 448 512 440.8 512 432V310.6L548.7 347.3C554.9 353.6 565.1 353.6 571.3 347.3H571.3zM0 176C0 167.2 7.164 160 16 160H368C376.8 160 384 167.2 384 176V208C384 216.8 376.8 224 368 224H16C7.164 224 0 216.8 0 208V176zM352 480C352 497.7 337.7 512 320 512H64C46.33 512 32 497.7 32 480V256H352V480zM144 320C135.2 320 128 327.2 128 336C128 344.8 135.2 352 144 352H240C248.8 352 256 344.8 256 336C256 327.2 248.8 320 240 320H144z"/></svg> INVESTIMENTOS</a>
                <div class="dropdown-content">
                  <a href="#">Investimento curto prazo</a>
                  <a href="#">Investimento longo prazo</a>
                  <a href="#">Tesouro direto</a>
                </div>
              </li>
              <li class="dropdown"> <!--CALCULADORAS -->
                <a href="#" class="dropbtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 400c-18 0-32-14-32-32s13.1-32 32-32c17.1 0 32 14 32 32S273.1 400 256 400zM325.1 258L280 286V288c0 13-11 24-24 24S232 301 232 288V272c0-8 4-16 12-21l57-34C308 213 312 206 312 198C312 186 301.1 176 289.1 176h-51.1C225.1 176 216 186 216 198c0 13-11 24-24 24s-24-11-24-24C168 159 199 128 237.1 128h51.1C329 128 360 159 360 198C360 222 347 245 325.1 258z"/></svg>  CALCULADORAS </a>
                <div class="dropdown-content">
                  <a href="{% url 'calc-sal-liquido' %}">Salário Líquido</a>
                  <a href="{% url 'calc-imp-renda' %}">Imposto de renda</a>
                  <a href="#">Férias</a>
                </div>
              </li>
          </div>
        </div>
     </nav>
    </div>
    <h1 style="font-family: 'Arial Black', sans-serif; font-size: 3em; color: #fdfdfd; text-transform: uppercase; text-align: center; animation: escrevendo 4s steps(40) forwards;">Calculadora de imposto de renda</h1>
    <p>Esta calculadora permite estimar o valor do imposto de renda que você deve pagar mensalmente, de acordo com a tabela progressiva do IRPF. Ela leva em conta o seu salário bruto e o número de dependentes que você tem. O cálculo é feito com base nas alíquotas e nas parcelas a deduzir do imposto, conforme a faixa de renda em que você se enquadra.</p>
    <br />
    <h2>Para usar a calculadora, siga os seguintes passos:</h2>
    <br />
    <ol>
      <li>Digite o valor do seu salário bruto (antes de descontos) no campo "Salário bruto (R$)".</li>
      <br />
      <li>Digite o número de dependentes que você tem no campo "Número de dependentes".</li>
      <br />
      <li>Clique no botão "Calcular" para obter o valor do imposto de renda.</li>
      <br />
      <li>O resultado será mostrado na caixa abaixo do botão, com o formato "Imposto de renda: R$ X,XX".</li>
      <br />
    </ol>
    <br />
    <br />
    <br />
    <br />
    <div class="calculator">
      <form id="form">
        <input type="number" id="salario" placeholder="Salário bruto (R$)" min="0" step="0.01" required />
        <input type="number" id="dependentes" placeholder="Número de dependentes" min="0" step="1" required />
        <button type="submit" class="button">Calcular</button>
      </form>
      <p id="resultado" class="display-box"></p>
    </div>
    <script>
      function calcularIRPF(salario, dependentes) {
        // Dedução por dependente: R$ 189,59
        var deducao = dependentes * 189.59
        // Base de cálculo: salário bruto menos a dedução
        var base = salario - deducao
        // Alíquota e parcela a deduzir do imposto
        var aliquota, parcela
        if (base <= 1903.98) {
          // Isento
          aliquota = 0
          parcela = 0
        } else if (base <= 2826.65) {
          // 7,5%
          aliquota = 0.075
          parcela = 142.8
        } else if (base <= 3751.05) {
          // 15%
          aliquota = 0.15
          parcela = 354.8
        } else if (base <= 4664.68) {
          // 22,5%
          aliquota = 0.225
          parcela = 636.13
        } else {
          // 27,5%
          aliquota = 0.275
          parcela = 869.36
        }
        // Imposto de renda: base de cálculo vezes a alíquota menos a parcela a deduzir
        var imposto = base * aliquota - parcela
        // Retorna o valor do imposto
        return imposto
      }
      
      // Seleciona o formulário e o elemento que mostra o resultado
      var form = document.getElementById('form')
      var resultado = document.getElementById('resultado')
      
      // Adiciona um evento de submit ao formulário
      form.addEventListener('submit', function (event) {
        // Previne o comportamento padrão do formulário (recarregar a página)
        event.preventDefault()
        // Obtém os valores dos inputs
        var salario = parseFloat(document.getElementById('salario').value)
        var dependentes = parseInt(document.getElementById('dependentes').value)
        // Verifica se os valores são válidos
        if (isNaN(salario) || isNaN(dependentes)) {
          // Mostra uma mensagem de erro
          resultado.textContent = 'Por favor, insira valores válidos.'
        } else {
          // Calcula o imposto de renda usando os valores como parâmetros
          var imposto = calcularIRPF(salario, dependentes)
          // Calcula o saldo líquido: salário bruto menos o imposto de renda
          var saldo = salario - imposto
          // Mostra o resultado em um alerta com o formato "O seu imposto de renda é: R$ X,XX"
          alert('O seu imposto de renda é: R$ ' + imposto.toFixed(2))
          location.reload()
        }
      })
    </script>
  </body>
{% endblock %}
